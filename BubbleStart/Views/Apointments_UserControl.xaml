<UserControl x:Class="BubbleStart.Views.Apointments_UserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewmodels="clr-namespace:BubbleStart.ViewModels"
             xmlns:models="clr-namespace:BubbleStart.Model"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:views="clr-namespace:BubbleStart.Views"
             xmlns:Converters="clr-namespace:BubbleStart.Converters"
             d:DataContext="{d:DesignInstance {x:Type viewmodels:Apointments_ViewModel}}"
             mc:Ignorable="d"
             Background="White"
             d:DesignHeight="650"
             d:DesignWidth="1200">
    <UserControl.Resources>
        <Converters:DateTimeToString x:Key="DateTimeToString" />
    </UserControl.Resources>
    <GroupBox Header="Πρόγραμμα Εβδομάδας">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center">
                <Button  Margin="30 0"
                        Command="{Binding PreviousWeekCommand}">
                    <iconPacks:PackIconFontAwesome Kind="ArrowCircleLeftSolid" />
                </Button>
                <Button Margin="30 0"
                        Command="{Binding NextWeekCommand}">
                    <iconPacks:PackIconFontAwesome Kind="ArrowCircleRightSolid" />
                </Button>
            </StackPanel>
            <ScrollViewer HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto"
                          Grid.Row="1">
                <Border BorderBrush="Gray"
                        BorderThickness="0 0 1 1"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Left">
                    <StackPanel>
                        <ItemsControl ItemsSource="{Binding Days[0].Hours}"
                                      VerticalAlignment="Top"
                                      Margin="80 0 0 0">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Height="Auto"
                                            BorderThickness="1 1 0 0"
                                            BorderBrush="Gray"
                                            Width="160">
                                        <Label   VerticalAlignment="Center"
                                                 HorizontalAlignment="Center"
                                                 Content="{Binding Time,ConverterParameter='HH:mm', Converter={StaticResource DateTimeToString}}" />
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <StackPanel Orientation="Horizontal">
                            <ItemsControl ItemsSource="{Binding Days }"
                                          HorizontalAlignment="Left">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Height="100"
                                                BorderThickness="1 1 0 0"
                                                BorderBrush="Gray"
                                                Width="80">
                                            <StackPanel HorizontalAlignment="Center"
                                                        VerticalAlignment="Center">
                                                <Label Content="{Binding Date,ConverterParameter='dddd', Converter={StaticResource DateTimeToString}}"
                                                       HorizontalAlignment="Center"
                                                       Padding="0" />
                                                <Label Content="{Binding Date,ConverterParameter='dd/MM', Converter={StaticResource DateTimeToString}}"
                                                       HorizontalAlignment="Center" />
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <!-- to pragmatiko itemscontrol-->
                            <ItemsControl ItemsSource="{Binding Days}"
                                          VerticalAlignment="Top">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <ItemsControl ItemsSource="{Binding Hours}"
                                                      HorizontalAlignment="Left">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Orientation="Horizontal" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border BorderBrush="Gray"
                                                            Width="160"
                                                            Height="100"
                                                            BorderThickness="1 1 0 0">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>
                                                            <ListBox BorderThickness="0"
                                                                     SelectedItem="{Binding SelectedApointment}"
                                                                     ItemsSource="{Binding Apointments}">
                                                                <ListBox.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <StackPanel Orientation="Horizontal">
                                                                            <TextBlock Text="{Binding Customer}" />
                                                                        </StackPanel>
                                                                    </DataTemplate>
                                                                </ListBox.ItemTemplate>
                                                            </ListBox>
                                                            <Border Grid.Column="1"
                                                                    BorderBrush="Black"
                                                                    BorderThickness="1 0 0 0">
                                                                <Grid>
                                                                    <Button Content="+"
                                                                            Width="15"
                                                                            Command="{Binding AddApointmentCommand}"
                                                                            Margin="2 5"
                                                                            VerticalAlignment="Top" />
                                                                    <Button Content="-"
                                                                            Width="15"
                                                                            Command="{Binding DeleteApointmentCommand}"
                                                                            Margin="2 5"
                                                                            VerticalAlignment="Bottom" />
                                                                </Grid>
                                                            </Border>
                                                        </Grid>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </ScrollViewer>
        </Grid>
    </GroupBox>
</UserControl>
